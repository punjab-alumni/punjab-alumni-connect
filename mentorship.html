<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mentorship Program - Punjab Alumni Connect</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Existing styles preserved unchanged */
    .profile-card {
      background: rgba(36, 147, 255, 0.07);
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 10px;
      display: flex;
      align-items: center;
      color: #eaf6ff;
      transition: background 0.3s ease;
    }
    .profile-card:hover {
      background: rgba(36, 147, 255, 0.14);
    }
    .avatar {
      font-size: 3rem;
      margin-right: 1rem;
      color: #2493ff;
    }
    .info h3 {
      margin: 0 0 0.5rem 0;
      color: #2493ff;
    }
    .info p {
      margin: 0.2rem 0;
    }
    .btn {
      margin-top: 0.5rem;
      padding: 0.5rem 1rem;
      background: #2493ff;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 600;
      color: #101927;
      transition: background 0.3s ease;
    }
    .btn:hover {
      background: #165ea8;
    }
    header {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      background-color: #101927;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    nav {
      flex-grow: 1;
    }
    nav ul.nav-list {
      display: flex;
      gap: 15px;
      list-style: none;
      padding: 0;
      margin: 0;
      font-weight: 700;
      font-size: 1rem;
      align-items: center;
      background: transparent;
    }
    nav ul.nav-list li a,
    nav ul.nav-list li button {
      color: #2493ff;
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      background: none;
      border: none;
      cursor: pointer;
      font-family: inherit;
      font-size: 1rem;
    }
    nav ul.nav-list li a.active,
    nav ul.nav-list li a:hover,
    nav ul.nav-list li button:hover {
      background: #2493ff;
      color: #101927;
      font-weight: bold;
    }
    .container {
      background-color: #121F33;
      border-radius: 1em;
      padding: 2rem;
      max-width: 1200px;
      margin: 2rem auto;
      color: #eaf6ff;
    }

    /* --- New chat feature styles --- */
    #chatbox {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 350px;
      height: 420px;
      background-color: #121F33;
      border-radius: 10px;
      box-shadow: 0 0 10px #0008;
      display: flex;
      flex-direction: column;
      font-family: Arial, sans-serif;
      z-index: 10000;
      color: #eaf6ff;
    }
    #chatbox-header {
      background-color: #2493ff;
      color: #101927;
      padding: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      font-weight: bold;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }
    #close-chat {
      position: absolute;
      right: 10px;
      top: 10px;
      background: none;
      border: none;
      font-size: 22px;
      cursor: pointer;
      font-weight: bold;
      color: #101927;
    }
    #chat-area {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      background: #1e2a4d;
      border-bottom-left-radius: 10px;
      border-bottom-right-radius: 10px;
    }
    #messages {
      flex: 1;
    }
    .msg {
      margin: 5px 0;
      padding: 8px 12px;
      border-radius: 8px;
      max-width: 75%;
      word-wrap: break-word;
    }
    .bot {
      background: #2493ff;
      color: #000;
      align-self: flex-start;
    }
    .user {
      background: #165ea8;
      color: #fff;
      align-self: flex-end;
    }
    #form-area {
      padding: 10px;
      background: #121F33;
    }
    #details-form {
      display: flex;
      flex-direction: column;
    }
    #details-form label {
      margin-top: 10px;
    }
    #details-form input {
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: none;
      background: #222d48;
      color: #eaf6ff;
      font-family: inherit;
    }
    #submit-details {
      margin-top: 15px;
      padding: 10px;
      background: #2493ff;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      color: #101927;
      transition: background 0.3s ease;
    }
    #submit-details:hover {
      background: #165ea8;
    }
    #chat-controls {
      display: none;
      padding: 10px;
      background: #121F33;
      display: flex;
      gap: 8px;
    }
    #chat-input {
      flex: 1;
      padding: 8px;
      border-radius: 20px;
      border: none;
      outline: none;
      font-family: inherit;
      color: #eaf6ff;
      background: #222d48;
    }
    #send-btn {
      padding: 8px 15px;
      background: #2493ff;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      color: #101927;
      transition: background 0.3s ease;
    }
    #send-btn:hover {
      background: #165ea8;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.jpg" alt="Punjab Alumni Connect Logo" style="height: 60px; margin-right: 20px;" />
    <nav>
      <ul class="nav-list">
        <li><a href="index.html">Home</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="alumni.html">Alumni</a></li>
        <li><a href="events.html">Events</a></li>
        <li><a href="jobs.html">Jobs</a></li>
        <li><a href="mentorship.html" class="active">Mentorship</a></li>
        <li><a href="collaborative.html" id="nav-collaborative">Collaborative Spaces</a></li>
        <li><a href="donations.html">Donations</a></li>
        <li><a href="settings.html">Settings</a></li>
        <li><button id="logout-btn">Logout</button></li>
      </ul>
    </nav>
  </header>
  <main class="container">
    <h1 id="page-title">Mentorship Program</h1>
    <p id="description">Connect with your mentorship community.</p>
    <div id="mentors-list"></div>
    <div id="students-list"></div>
  </main>

  <!-- Chatbox for mentorship request -->
  <div id="chatbox" aria-live="polite" role="region" aria-label="Mentorship Chat">
    <div id="chatbox-header">
      Request Mentorship
      <button id="close-chat" aria-label="Close chatbox">&times;</button>
    </div>
    <div id="chat-area">
      <div id="messages"></div>
    </div>
    <div id="form-area">
      <form id="details-form">
        <label for="name-input">Your Name:</label>
        <input type="text" id="name-input" required />
        <label for="year-input">Which Year Student are you?</label>
        <input type="number" id="year-input" min="1" max="10" required />
        <label for="course-input">Your Course:</label>
        <input type="text" id="course-input" required />
        <button id="submit-details" type="submit">Submit Details</button>
      </form>
    </div>
    <div id="chat-controls">
      <input type="text" id="chat-input" placeholder="Type 'hello' to start..." aria-label="Chat input" autocomplete="off" />
      <button id="send-btn" aria-label="Send message">Send</button>
    </div>
  </div>

  <script>
    // Data as before, preserved exactly
    const alumniAsMentors = {
      "Punjab University": [
        { name: "Dr. Rajesh Kumar", expertise: "Machine Learning, Cloud Computing", contact: "rajesh.kumar@pu.edu", bio: "Expert in AI and cloud technologies with 10+ years experience." },
        { name: "Priya Sharma", expertise: "Product Management, Leadership", contact: "priya.sharma@pu.edu", bio: "Seasoned Product Manager passionate about mentoring." },
        { name: "Amit Joshi", expertise: "Cybersecurity, Network Architecture", contact: "amit.joshi@pu.edu", bio: "Security analyst and mentor for cybersecurity students." }
      ],
      "Thapar University": [
        { name: "Arjun Mehta", expertise: "Data Science, AI", contact: "arjun.mehta@thapar.edu", bio: "Helping students excel in analytics." },
        { name: "Simran Kaur", expertise: "Civil Engineering, Project Management", contact: "simran.kaur@thapar.edu", bio: "Experienced civil engineer and mentor." },
        { name: "Harpreet Singh", expertise: "Software Engineering, Agile Processes", contact: "harpreet.singh@thapar.edu", bio: "Senior software developer and coach." }
      ],
      "Lovely Professional University": [
        { name: "Vikram Patel", expertise: "Entrepreneurship, Innovation", contact: "vikram.patel@lpu.co.in", bio: "Startup founder and innovation enthusiast." },
        { name: "Neha Gupta", expertise: "Marketing, Leadership", contact: "neha.gupta@lpu.co.in", bio: "Marketing head passionate about mentoring young professionals." },
        { name: "Sanjay Kumar", expertise: "Electrical Engineering, R&D", contact: "sanjay.kumar@lpu.co.in", bio: "Research leader with focus on sustainable tech." }
      ],
      "Punjab Engineering College": [
        { name: "Amit Singh", expertise: "Distributed Systems, Leadership", contact: "amit.singh@pec.edu.in", bio: "Engineering manager and leadership coach." },
        { name: "Kavita Mehta", expertise: "Automation, Robotics", contact: "kavita.mehta@pec.edu.in", bio: "Robotics expert mentoring automation students." },
        { name: "Rohan Sharma", expertise: "Data Analytics, Cloud Computing", contact: "rohan.sharma@pec.edu.in", bio: "Cloud architect and mentor." }
      ],
      "Guru Nanak Dev University": [
        { name: "Jaspreet Singh", expertise: "Nanotechnology, Quantum Physics", contact: "jaspreet.singh@gndu.ac.in", bio: "Research scientist and mentor." },
        { name: "Manpreet Kaur", expertise: "Environmental Science, Sustainability", contact: "manpreet.kaur@gndu.ac.in", bio: "Mentoring in environmental research." },
        { name: "Balraj Gill", expertise: "Mechanical Engineering, Design", contact: "balraj.gill@gndu.ac.in", bio: "Engineer and design consultant." }
      ],
      "Chandigarh University": [
        { name: "Neeraj Sharma", expertise: "Cloud Solutions, DevOps", contact: "neeraj.sharma@cu.in", bio: "Cloud engineer focused on career mentoring." },
        { name: "Mira Singh", expertise: "Software Testing, QA", contact: "mira.singh@cu.in", bio: "QA lead and student mentor." },
        { name: "Ravi Kumar", expertise: "Network Security, Systems", contact: "ravi.kumar@cu.in", bio: "Security analyst with strong mentorship skills." }
      ],
      "Chitkara University": [
        { name: "Dr. Amarjeet Singh", expertise: "Biotechnology, Research", contact: "amarjeet.singh@chitkara.edu.in", bio: "Expert in biotech research mentoring students." },
        { name: "Simranjeet Kaur", expertise: "Software Development, Agile", contact: "simranjeet.kaur@chitkara.edu.in", bio: "Software engineer and agile coach mentoring young developers." },
        { name: "Gurpreet Kaur", expertise: "Project Management, Leadership", contact: "gurpreet.kaur@chitkara.edu.in", bio: "Experienced project manager mentoring future leaders." }
      ]
    };
    const studentsAsMentees = {
      "Punjab University": [
        { name: "Student A", department: "Computer Science", email: "studenta@pu.edu" },
        { name: "Student B", department: "Electronics", email: "studentb@pu.edu" },
        { name: "Student C", department: "Mechanical Engineering", email: "studentc@pu.edu" }
      ],
      "Thapar University": [
        { name: "Student D", department: "Mathematics", email: "studentd@thapar.edu" },
        { name: "Student E", department: "Civil Engineering", email: "studente@thapar.edu" },
        { name: "Student F", department: "Electrical Engineering", email: "studentf@thapar.edu" }
      ],
      "Lovely Professional University": [
        { name: "Student G", department: "Mechanical Engineering", email: "studentg@lpu.co.in" },
        { name: "Student H", department: "Business Management", email: "studenth@lpu.co.in" }
      ],
      "Punjab Engineering College": [
        { name: "Student I", department: "Information Technology", email: "studenti@pec.edu.in" },
        { name: "Student J", department: "Computer Science", email: "studentj@pec.edu.in" }
      ],
      "Guru Nanak Dev University": [
        { name: "Student K", department: "Physics", email: "studentk@gndu.ac.in" },
        { name: "Student L", department: "Chemistry", email: "studentl@gndu.ac.in" }
      ],
      "Chandigarh University": [
        { name: "Student M", department: "Computer Applications", email: "studentm@cu.in" },
        { name: "Student N", department: "Electronics", email: "studentn@cu.in" }
      ],
      "Chitkara University": [
        { name: "Student O", department: "Biotechnology", email: "studento@chitkara.edu.in" },
        { name: "Student P", department: "Computer Science", email: "studentp@chitkara.edu.in" }
      ]
    };

    // Create cards (unchanged)
    function createMentorCard(mentor) {
      return `
        <div class="profile-card">
          <div class="avatar">ðŸ‘¤</div>
          <div class="info">
            <h3>${mentor.name}</h3>
            <p><strong>Expertise:</strong> ${mentor.expertise}</p>
            <p><strong>Contact:</strong> <a href="mailto:${mentor.contact}">${mentor.contact}</a></p>
            <p>${mentor.bio}</p>
            <button class="btn request-mentorship-btn">Request Mentorship</button>
          </div>
        </div>`;
    }
    function createStudentCard(student) {
      return `
        <div class="profile-card">
          <div class="avatar">ðŸŽ“</div>
          <div class="info">
            <h3>${student.name}</h3>
            <p><strong>Department:</strong> ${student.department}</p>
            <p><strong>Email:</strong> <a href="mailto:${student.email}">${student.email}</a></p>
          </div>
        </div>`;
    }

    const mentorsList = document.getElementById('mentors-list');
    const studentsList = document.getElementById('students-list');
    const logoutBtn = document.getElementById('logout-btn');

    // Chatbox elements
    const chatbox = document.getElementById('chatbox');
    const closeChatBtn = document.getElementById('close-chat');
    const messagesDiv = document.getElementById('messages');
    const chatInput = document.getElementById('chat-input');
    const sendBtn = document.getElementById('send-btn');
    const detailsForm = document.getElementById('details-form');
    const nameInput = document.getElementById('name-input');
    const yearInput = document.getElementById('year-input');
    const courseInput = document.getElementById('course-input');

    function addMessage(text, sender) {
      const msg = document.createElement('div');
      msg.classList.add('msg');
      msg.classList.add(sender === 'bot' ? 'bot' : 'user');
      msg.textContent = text;
      messagesDiv.appendChild(msg);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
    function clearMessages() {
      messagesDiv.innerHTML = '';
    }
    function resetChat() {
      clearMessages();
      chatInput.value = '';
      chatInput.style.display = 'none';
      sendBtn.style.display = 'none';
      detailsForm.style.display = 'block';
    }

    window.addEventListener('DOMContentLoaded', () => {
      const institution = sessionStorage.getItem('loggedInInstitution');
      const role = sessionStorage.getItem('loggedInRole');
      const email = sessionStorage.getItem('loggedInEmail');

      if (!institution || !role || !email) {
        window.location.href = 'login.html';
        return;
      }

      document.getElementById('page-title').textContent = `${institution} Mentorship Program`;

      if (role === 'student') {
        document.getElementById('description').textContent = 'Connect with experienced alumni mentors from your institution.';
        const mentors = alumniAsMentors[institution] || [];
        mentorsList.innerHTML = mentors.length ? mentors.map(createMentorCard).join('') : '<p>No mentors available.</p>';
        studentsList.innerHTML = '';
      } else if (role === 'alumni') {
        document.getElementById('description').textContent = 'Connect with students seeking mentorship from your institution.';
        const students = studentsAsMentees[institution] || [];
        studentsList.innerHTML = students.length ? students.map(createStudentCard).join('') : '<p>No students available for mentorship.</p>';
        mentorsList.innerHTML = '';
      } else if (role === 'admin') {
        document.getElementById('description').textContent = 'Manage both mentors (alumni) and students mentorship connections.';
        const mentors = alumniAsMentors[institution] || [];
        const students = studentsAsMentees[institution] || [];
        mentorsList.innerHTML = '<h2>Mentors (Alumni)</h2>' + (mentors.length ? mentors.map(createMentorCard).join('') : '<p>No mentors available.</p>');
        studentsList.innerHTML = '<h2>Students</h2>' + (students.length ? students.map(createStudentCard).join('') : '<p>No students available.</p>');
      }

      // Add event listeners after content is rendered
      setTimeout(() => {
        document.querySelectorAll('.request-mentorship-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            if (role === 'student') {
              resetChat();
              chatbox.style.display = 'flex';
              addMessage('Please fill your details to start mentorship request.', 'bot');
            } else {
              alert('Feature not for alumni or admin.');
            }
          });
        });
      }, 0);

      logoutBtn.addEventListener('click', () => {
        sessionStorage.clear();
        window.location.href = 'login.html';
      });
    });

    closeChatBtn.addEventListener('click', () => {
      chatbox.style.display = 'none';
    });

    detailsForm.addEventListener('submit', (e) => {
      e.preventDefault();
      if (!nameInput.value.trim() || !yearInput.value.trim() || !courseInput.value.trim()) {
        alert('Please fill all details.');
        return;
      }
      detailsForm.style.display = 'none';
      chatInput.style.display = 'inline-block';
      sendBtn.style.display = 'inline-block';
      clearMessages();
      addMessage(`Thank you, ${nameInput.value.trim()}. Type 'hello' to start conversation with the mentor.`, 'bot');
      chatInput.focus();
    });

    sendBtn.addEventListener('click', () => {
      const userText = chatInput.value.trim();
      if (!userText) return;
      addMessage(userText, 'user');
      chatInput.value = '';
      if (userText.toLowerCase() === 'hello') {
        setTimeout(() => {
          addMessage('Mentor will connect with you soon.', 'bot');
        }, 500);
        setTimeout(() => {
          chatbox.style.display = 'none';
        }, 2500);
      } else {
        setTimeout(() => {
          addMessage("Please type 'hello' to start the conversation.", 'bot');
        }, 500);
      }
    });

    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        sendBtn.click();
      }
    });
  </script>
</body>
</html>
