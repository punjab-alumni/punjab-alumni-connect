<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Collaborative Learning Spaces - Punjab Alumni Connect</title>
  <link rel="stylesheet" href="styles.css"/>
  <style>
    body, html { font-family: 'Inter',sans-serif; background:linear-gradient(135deg,#101927,#18345a 70%); color:#eaf6ff; margin:0;padding:0; min-height:100vh; }
    header { display: flex; align-items: center; padding: 10px 20px; background-color: #101927; position: sticky; top: 0; z-index: 1000; }
    nav { flex-grow: 1; }
    nav ul.nav-list { display: flex; gap: 15px; list-style: none; padding: 0; margin: 0; font-weight: 700; font-size: 1rem; align-items: center; background: transparent; }
    nav ul.nav-list li a, nav ul.nav-list li button { color: #2493ff; text-decoration: none; padding: 0.5rem 1rem; border-radius: 6px; background: none; border: none; cursor: pointer; font-family: inherit; font-size: 1rem; }
    nav ul.nav-list li a.active, nav ul.nav-list li a:hover, nav ul.nav-list li button:hover { background: #2493ff; color: #101927; font-weight: bold; }
    main.container { background-color: #121F33; border-radius: 1em; padding: 2rem; max-width: 1200px; margin: 2rem auto; color: #eaf6ff; min-height: 680px; }
    .collab-top-bar { display:flex; flex-wrap:wrap; align-items:center; margin-bottom: 2rem; gap: 20px;}
    .btn-create { background: #3BB4FF; color: #fff; border: none; border-radius: 21px; font-weight: 800; padding: 12px 34px; cursor:pointer; margin-left:auto; }
    .btn-create:hover { background: #1769ac; }
    .collab-section { display: flex; gap: 38px; }
    .collab-rooms-list { flex: 1 1 260px; min-width: 214px; max-width: 320px; }
    .collab-card { background: #1b2a44; color: #fff; border-radius: 13px; margin-bottom: 1.2rem; padding: 1.1rem 1.1rem 1.2rem 1.1rem; cursor:pointer; border:2px solid transparent; transition: border 0.2s; }
    .collab-card.selected, .collab-card:hover { border:2px solid #3BB4FF; background: #233a63;}
    .collab-title { font-weight: bold; color: #42b6ff; font-size:1.13rem; }
    .collab-members { font-size: 0.93rem; color: #aee8fb; margin-bottom: 0.43rem; }
    .collab-desc { font-size: 1.01rem; margin-bottom: .53rem;}
    .collab-wall { flex: 2 1 420px; background: #20375d; border-radius: 16px; padding: 2.2rem 2.2rem 1.2rem 2.2rem; min-width: 0; display: flex; flex-direction:column; }
    .collab-wall-title { font-size: 1.20rem; font-weight: bold; color: #60d3ff; margin-bottom: 12px;}
    .collab-wall-messages { flex:1 1 auto;overflow-y:auto;max-height:340px;margin-bottom:14px;margin-top:8px; }
    .collab-msg { background:rgba(36,147,255,0.10); border-radius:12px; margin-bottom:10px; padding:10px 15px; }
    .collab-msg .meta { font-size: 0.87rem; color: #aee8fb; }
    .collab-msg .body { font-size: 1rem; color: #eaf6ff; margin-top: 2px;}
    .collab-wall-form { margin-top: 8px;display: flex;gap: 11px;}
    .collab-wall-form input, .collab-wall-form textarea { flex: 1; font-family: inherit; border-radius: 7px; border:none; background: #152237; color: #eaf6ff; padding: 10px; font-size: 1rem; }
    .collab-wall-form textarea { min-height: 32px; max-height: 140px; }
    .btn-send { background: #3BB4FF; color: #fff;font-weight:700; border:none; border-radius:21px; padding:11px 28px; cursor:pointer; }
    .btn-send:hover { background: #1769ac; }
    @media(max-width: 900px) {
      .collab-section { flex-direction:column; }
      .collab-wall { margin-top:32px; padding: 1.3rem 0.7rem 1.15rem 0.7rem;}
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.jpg" alt="Punjab Alumni Connect Logo" style="height: 60px; margin-right: 20px;" />
    <nav>
      <ul class="nav-list">
        <li><a href="index.html">Home</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="alumni.html">Alumni</a></li>
        <li><a href="events.html">Events</a></li>
        <li><a href="jobs.html">Jobs</a></li>
        <li><a href="mentorship.html">Mentorship</a></li>
        <li><a href="donations.html">Donations</a></li>
        <li><a href="settings.html">Settings</a></li>
        <li><a href="collaborative.html" class="active">Collaborative Spaces</a></li>
        <li><button id="logout-btn">Logout</button></li>
      </ul>
    </nav>
  </header>
  <main class="container">
    <div class="collab-top-bar">
      <h1>Collaborative Learning Spaces</h1>
      <button class="btn-create" onclick="alert('Room creation coming soon!')">+ Start New Room</button>
    </div>
    <div class="collab-section">
      <div class="collab-rooms-list" id="collab-rooms-list"></div>
      <div class="collab-wall" id="collab-wall" style="display:none"></div>
    </div>
  </main>
  <script>
    // --- DEMO DATA ---
    const collabRooms = [
      {
        id: "mlai",
        title: "AI/ML Student Project Room",
        description: "Discuss machine learning projects and questions. Mentors from multiple universities available.",
        members: [
          {name: "Rajesh Kumar", role: "Alumni", university: "Punjab University"},
          {name: "Aditi Singh", role: "Student", university: "Chandigarh University"}
        ],
        messages: [
          {name:"Rajesh Kumar",role:"Alumni",university:"Punjab University",text:"Welcome to the ML/AI project room! Ask your questions below.",time:"2025-09-18 08:44"},
          {name:"Aditi Singh",role:"Student",university:"Chandigarh University",text:"How do I start with neural networks?", time:"2025-09-18 09:00"}
        ]
      },
      {
        id: "bplan",
        title: "Business Plan Brainstorm",
        description: "Share startup pitches, get feedback from senior alumni and peers.",
        members: [
          {name: "Priya Sharma", role: "Alumni", university: "Punjab University"},
          {name: "Simran Kaur", role: "Student", university: "Thapar University"}
        ],
        messages: [
          {name:"Priya Sharma",role:"Alumni",university:"Punjab University",text:"Share your pitch decks here!",time:"2025-09-18 08:53"}
        ]
      },
      {
        id: "research",
        title: "Inter-University Research Group",
        description: "Collaborate on academic research, share articles and get alumni guidance.",
        members: [
          {name: "Arjun Mehta", role: "Alumni", university: "Thapar University"},
          {name: "Neha Gupta", role: "Alumni", university: "Lovely Professional University"},
          {name: "Jaspreet Singh", role: "Student", university: "Guru Nanak Dev University"}
        ],
        messages: [
          {name:"Arjun Mehta",role:"Alumni",university:"Thapar University",text:"Let's plan our joint publication this semester.",time:"2025-09-18 09:01"}
        ]
      }
    ];

    // --- UI/UX LOGIC ---
    let selectedRoomIdx = 0;

    function renderRoomsList() {
      let html = '';
      collabRooms.forEach((room, idx) => {
        html += `<div class="collab-card${idx===selectedRoomIdx ? " selected":""}" onclick="selectRoom(${idx})">
          <div class="collab-title">${room.title}</div>
          <div class="collab-members"><strong>Members:</strong> ${room.members.map(m => m.name+' ('+m.role+' - '+m.university+')').join(', ')}</div>
          <div class="collab-desc">${room.description}</div>
        </div>`;
      });
      document.getElementById('collab-rooms-list').innerHTML = html;
    }

    function renderWall() {
      if(!collabRooms[selectedRoomIdx]) return;
      const room = collabRooms[selectedRoomIdx];
      let html = `<div class="collab-wall-title">${room.title} <span style="font-size:1rem;color:#fff8;">| ${room.description}</span></div>`;
      html += '<div class="collab-wall-messages" id="collab-wall-messages">';
      if(room.messages && room.messages.length) {
        html += room.messages.map(msg =>
          `<div class="collab-msg">
            <div class="meta">${msg.name} (${msg.role} - ${msg.university}) | <span>${msg.time}</span></div>
            <div class="body">${msg.text}</div>
          </div>`).join('');
      } else {
        html += `<div style="color:#aaa;">No messages yet.</div>`;
      }
      html += '</div>';
      // User posting form (simple demo; expand with real user later)
      html += `<form class="collab-wall-form" onsubmit="return postMessage(event)">
        <input id="posterName" placeholder="Your Name" required style="max-width:120px">
        <input id="posterRole" placeholder="Role (Student/Alumni)" required style="max-width:95px">
        <input id="posterUniversity" placeholder="University" required style="max-width:160px">
        <textarea id="msgText" placeholder="Type your message..." required></textarea>
        <button class="btn-send" type="submit">Send</button>
      </form>`;
      document.getElementById('collab-wall').innerHTML = html;
      document.getElementById('collab-wall').style.display = '';
      setTimeout(()=> {
        const wallMessages = document.getElementById('collab-wall-messages');
        if(wallMessages) wallMessages.scrollTop = wallMessages.scrollHeight;
      }, 100);
    }

    window.selectRoom = function(idx) {
      selectedRoomIdx = idx;
      renderRoomsList();
      renderWall();
    }

    window.postMessage = function(event) {
      event.preventDefault();
      const name = document.getElementById('posterName').value.trim();
      const role = document.getElementById('posterRole').value.trim();
      const university = document.getElementById('posterUniversity').value.trim();
      const text = document.getElementById('msgText').value.trim();
      if(!name || !role || !university || !text) return false;
      const now = new Date();
      let hm = now.getHours().toString().padStart(2,'0')+":"+now.getMinutes().toString().padStart(2,'0');
      let dt = now.getFullYear()+"-"+(now.getMonth()+1).toString().padStart(2,'0')+"-"+now.getDate().toString().padStart(2,'0');
      collabRooms[selectedRoomIdx].messages.push({
        name, role, university, text,
        time: dt+' '+hm
      });
      renderWall();
      return false;
    }

    // Initial rendering
    renderRoomsList();
    renderWall(); // Show the first room on page load by default

    // Logout logic same as your theme
    document.getElementById('logout-btn').addEventListener('click', () => {
      sessionStorage.clear();
      window.location.href = 'login.html';
    });
  </script>
</body>
</html>
